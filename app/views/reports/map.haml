= content_for :head do
  = '<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=ABQIAAAALIr9CgGSyKEGUvdJz6JbKhQq1UCU9SBkmSXBlazPa3yrPjWakBTWgEUybsIS-DVD0rD6Sw9GTwZC2Q" type="text/javascript"></script>'
  :javascript
    function createMarker(map, report) {
      var point = new GLatLng(report['latitude'], report['longitude']);
      var marker = new GMarker(point, true);
      GEvent.addListener(marker, 'click', function() {
        var minHtml = '';
        minHtml += '<strong>Oil:</strong> ' + report['oil'] + '<br/>';
        minHtml += '<strong>Wildlife:</strong> ' + report['wildlife'] + '<br/>';
        minHtml += '<strong>Lat/Lng:</strong> ' + report['latitude'] + '/' + report['longitude'] + '<br/>';

        var maxHtml = minHtml;

        maxHtml += '<strong>Description</strong> ' + report['description'] + '<br/>';
        if (report['media'])
          maxHtml += '<img src="' + report['media'] + '" />';

        map.openInfoWindowHtml(point, minHtml, { maxContent: maxHtml });
      });

      return marker;
    }

    jQuery(document).ready(function() {
      #{show_map(@reports)}
    });

= render :partial => 'shared/header'

#main
  #path
    You are here:
    = link_to 'Home', root_url
    >>
    %h1 Map
  
  #content
    #reports.container_12
      .block
        .block_head
          %h2 Map of Gulf Coast Oil Spill
        .block_content
          %div{:id => 'map', :style => 'width: 100%; height: 600px; border: thin solid black;'}
      .clear


= render :partial => "shared/footer"